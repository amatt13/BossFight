<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="css/stylesheet.css" type="text/css" charset="utf-8" />
	<link rel="stylesheet" href="css/shop.css" type="text/css" charset="utf-8" />
	<meta charset="utf-8">
	<meta http-equiv="content_security_policy" content="script-src 'self'; script-src-elem 'self'">
	<title>Boss Fight</title>
</head>
<body class="wallpaper">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script> <!-- allow jquery -->
	<!-- Login controls -->
	<div class="login-group">
		<label class="grid-col1-grid-row1">User name: </label>
		<label class="grid-col1-grid-row2">Password: </label>
		<input id="inputUserName" type="text" autocomplete="username" required/>
		<input id="inputPassword" type="password" autocomplete="current-password" required/>
		<button id="signInButton" type="button" class="btn-primary grid-col1/3-grid-row3">
			Sign in
		</button>
	</div>
	<!-- Title -->
	<h1 class="title">
		Boss Fight
	</h1>
	<div class="flex">
		<!-- Canvas/Left column -->
		<div class="left-column">
			<div style="display: grid; grid-template-columns: repeat(2, 1fr); grid-auto-rows: minmax(1080, auto); gap: 10px; color: var(--default-font-colour); padding-top: 15px;">
				<button id="voteMonsterTierDownButton" type="button" class="btn-primary">
					<img src="./images/ui_icons/red_arrow_down.png" class="vote-button">
					Difficulty down
				</button>
				<button id="voteMonsterTierUpButton" type="button" class="btn-primary">
					<img src="./images/ui_icons/green_arrow_up.png" class="vote-button">
					Difficulty up
				</button>
			</div>
			<canvas id="mainCanvas"></canvas>
		</div>
		<!-- Main menu/centre column -->
		<div class="column" style="float:left; padding-left: 5px; flex-grow:1; flex-shrink: 0; border: solid; color: var(--border-colour); margin-left: 5px; margin-right: 5px;">
			<div style="display: grid; grid-template-columns: repeat(2, 1fr); grid-auto-rows: minmax(1080, auto); gap: 10px; color: var(--default-font-colour); padding-top: 15px;">
				<!-- Player info column -->
				<div style="grid-column: 1; grid-row: 1;">
					<label>User: </label>
					<label id="player_name">Player name</label>
				</div>
				<div style="grid-column: 1; grid-row: 2;">
					<img id="playerSprite" src="./images/sprites/player_classes/peasant.png" alt="Player class sprite" width="150" height="150" style="object-fit: fill;">
				</div>
				<div style="grid-column: 1; grid-row: 3;">
					<label style="display: inline-block; width: 50px;">HP: </label>
					<progress id="progress_player_health" value="0" max="100"></progress>
					<label id="player_hp"></label>
				</div>
				<div style="grid-column: 1; grid-row: 4;">
					<label style="display: inline-block; width: 50px;">Mana: </label>
					<progress class="mana-progress" id="progress_player_mana" value="0" max="100"></progress>
					<label id="player_mana"></label>
				</div>
				<div style="grid-column: 1; grid-row: 5;">
					<label>Level: </label>
					<label id="player_level_and_class"></label>
				</div>
				<div style="grid-column: 1; grid-row: 6;">
					<label>XP: </label>
					<label id="player_xp"></label>		
					<label id="player_xp_to_next_level"></label>
				</div>
				<div style="grid-column: 1; grid-row: 7;">
					<label>Gold: </label>
					<label id="player_gold"></label>
				</div>
				<div style="grid-column: 1; grid-row: 8;">
					<label>Equipped weapon: </label>
					<label id="player_equipped_weapon_name"></label>
				</div>
				<div style="grid-column: 1; grid-row: 9;">
					<button type="button" class="btn-primary" onclick="LoginTestUser()">
						Login "Test User"
					</button>
					<button type="button" class="btn-primary" onclick="LoginTestUser2()">
						Login "Test User2"
					</button>
				</div>
				<div style="grid-column: 1; grid-row: 10;">
					<button type="button" class="btn-primary" onclick="AttackMonster()">
						<img src="./images/ui_icons/attack_sword.png" style="max-width: 100%; max-height: 100%;">
						Attack Monster
					</button>
				</div>
				<!-- Player inventory -->
				<div style="grid-column: 2; grid-row: 1/20;">
					<select id="player_inventory" size="1" style="flex-grow:1; float:left; width: 95%;"></select>
					<button id="openShopButton" type="button" class="btn-primary" style="flex-grow:1; float:left; margin-top: 5px;">Open shop</button>
				</div>
			</div>
		</div>
		<!-- Right column -->
		<div class="column" style="float:right; flex: 10%; border: solid; color: var(--border-colour);">
			<div style="display: grid; grid-template-columns: repeat(3, 1fr); grid-auto-rows: minmax(1080, auto); gap: 10px; color: var(--default-font-colour); margin-right: 5px; margin-left: 5px;">
				<!-- logs -->
				<div style="grid-column: 1/-1; grid-row: 2;">
					<label onclick="OpenLog(event, 'text_log');">
					  <div id="text_log_hover" class="log-tab hover-light-grey border-red">General</div>
					</label>
					<label onclick="OpenLog(event, 'combat_log');">
					  <div id="combat_log_hover" class="log-tab hover-light-grey">Combat</div>
					</label>
					<label onclick="OpenLog(event, 'chat_log');">
					  <div id="chat_log_hover" class="log-tab hover-light-grey">Chat</div>
					</label>
				  </div>
				<textarea id="text_log" class="log" placeholder="General log..." readonly=true></textarea>
				<textarea id="combat_log" class="log" placeholder="Combat log..." readonly=true style="display: none;"></textarea>
				<textarea id="chat_log" class="log" placeholder="Chat log..." readonly=true style="display: none;"></textarea>
	
				<button id="sendChatMessageButton" type="button" class="btn-primary" style="grid-row: 5; grid-column: 1">Send</button>
				<input id="chatMessageContentInput" type="text" style="grid-row: 5; grid-column: 2/-1" ></input>
				<div style="grid-column: 1/-1; grid-row: 6;">
					<div style="background-color: var(--wallpaper-background-colour); width: 30px; height: 30px; float: left; border: solid; color: white; border-width: 1px;"></div>
					<div style="background-color: var(--border-colour); width: 30px; height: 30px; float: left; border: solid; color: white; border-width: 1px;"></div>
					<div style="background-color: var(--shadow-colour); width: 30px; height: 30px; float: left; border: solid; color: white; border-width: 1px;"></div>
					<div style="background-color: var(--text-background-colour); width: 30px; height: 30px; float: left; border: solid; color: white; border-width: 1px;"></div>
					<div style="background-color: var(--default-font-colour); width: 30px; height: 30px; float: left; border: solid; color: white; border-width: 1px;"></div>
				</div>
			</div>
		</div>
	</div>
	<label style="float: left;">
		UI icons provided by 
		<a href="https://cheekyinkling.itch.io/shikashis-fantasy-icons-pack">shikashi</a>
	</label>
	<label style="float:right;">
		Monster and player sprites by
		<a href="https://www.wesnoth.org/">The Battle for Wesnoth</a>
	</label>
</body>
</html>

<!-- context menu -->
<ul class='custom-menu context-menu'>
	<li id=custom_menu_equip data-action = "equip" data-equip_id=none>Equip weapon</li>
	<li id=custom_menu_sell data-action = "sell" data-sell_id=none>Sell weapon</li>
</ul>

<ul class="custom-alert custom-menu center-browser-div">
	<label id="custom-alert-text-label"></label>
</ul>

<!-- shop dialog -->
<div id="dialogBackground" class="shop-background"></div>
<div id="shopDialog" class="modal-dialog">
	<form method="dialog">
		<div class="shop-column-divider">
			<!-- weapons -->
			<div class="column" style="float:left; padding-left: 5px; flex-grow:1; flex-shrink: 0; border: solid; color: var(--border-colour); margin-left: 5px; margin-right: 5px; flex: 50%;">
				<div style="display: grid; grid-template-columns: repeat(2, 1fr); grid-auto-rows: minmax(1080, auto); gap: 10px; color: var(--default-font-colour); padding-top: 15px;">
					<label style="grid-column: 1; grid-row: 1; text-align: center;  font-size: xx-large;">Weapons</label>
					<div id="testWeaponContainer1" style="grid-column: 1; grid-row: 2;">
						<button class="buy-button btn-primary" id="test1">Buy</button>
						<label class="buy-label">Weapon 1</label>
					</div>
					<div id="testWeaponContainer2" style="grid-column: 1; grid-row: 3;">
						<button  class="buy-button btn-primary">Buy</button>
						<label class="buy-label">Weapon 2</label>
					</div>
				</div>
			</div>
			<!-- classes -->
			<div class="column" style="float:right; padding-right: 5px; flex-grow:1; flex-shrink: 0; border: solid; color: var(--border-colour); margin-left: 5px; margin-right: 5px; flex: 50%;">
				<div style="display: grid; grid-template-columns: repeat(2, 1fr); grid-auto-rows: minmax(1080, auto); gap: 10px; color: var(--default-font-colour); padding-top: 15px;">
					<label style="grid-column: 1; grid-row: 1; text-align: center; font-size: xx-large;">Classes</label>
					<div id="playerclass_buy_options" style="grid-column: 1; grid-row: 2;"></div>
				</div>
			</div>
		</div>
		<menu style="position: sticky; bottom: 0px;">
			<label id="shop_gold_amount_label" style="right:300px; float: right; position: sticky;"></label>
			<button id="closeShopButton" value="default" class="btn-primary btn-shop">Close shop</button>
		</menu>
	</form>
</div>

<img id="monsterSprite" src="./images/sprites/monsters/goblin.png" alt="Current monster sprite" class="hidden">

<!-- not to self... the order of these scripts matter -->
<script type="text/javascript" src="scripts/model.js"></script>
<script type="text/javascript" src="scripts/chat.js"></script>
<script type="text/javascript" src="scripts/socketCommunication.js"></script>
<script type="text/javascript" src="scripts/cf.js"></script>
<script type="text/javascript" src="scripts/canvas.js"></script>
<script type="text/javascript" src="scripts/custom_context_menu.js"></script>
<script type="text/javascript" src="scripts/custom_alert.js"></script>
<script type="text/javascript" src="scripts/shop_dialog.js"></script>
<script type="text/javascript" src="scripts/sign_in.js"></script>
<script type="text/javascript" src="scripts/updateUI.js"></script>
